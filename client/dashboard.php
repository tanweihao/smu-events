

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Dashboard - Admin</title>
		<meta name="description" content="This is page-header (.page-header &gt; h1)" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!--basic styles-->

		<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" />
		<link href="bootstrap/css/bootstrap-fileupload.min.css" rel="stylesheet" />
		<link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="themes/font-awesome/css/font-awesome.min.css" />

		<!--[if IE 7]>
		  <link rel="stylesheet" href="themes/font-awesome/css/font-awesome-ie7.min.css" />
		<![endif]-->

		<!--page specific plugin styles-->

		<link rel="stylesheet" href="themes/css/prettify.css" />
		<!--fonts-->

		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />

		<!--ace styles-->

		<link rel="stylesheet" href="themes/css/w8.min.css" />
		<link rel="stylesheet" href="themes/css/w8-responsive.min.css" />
		<link rel="stylesheet" href="themes/css/w8-skins.min.css" />
		<style>
			
			.thumbnail .caption{
				padding:0;
			}
			#nav-search-input{
				width:300px;
			}
			.dropdown-menu li>a{
    			text-overflow: ellipsis;
    			overflow: hidden;
			}
			#loading-indicator {
  				position: absolute;
  				left:50%;
  				top:50%;
			}
			
			#nav-search-icon{
				line-height:34px;
			}
		</style>
		<!--[if lte IE 8]>
		  <link rel="stylesheet" href="themes/css/ace-ie.min.css" />
		<![endif]-->

		<!--inline styles if any-->
	</head>

	<body>
	<div id="searchBox" class="row" style="display:none;margin-bottom:2px;">
	<div class="span6" style="float: none; margin: 0 auto;">
						
      				</div>
      				
      			
      			</div>
		<div class="navbar navbar-inverse">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a href="#" class="brand">
						<small>
							<i class="icon-iphone-shake"></i>
							Events Management
						</small>
					</a><!--/.brand-->
					<!--<ul class="nav-search pagination-centered">
						 <li class="pagination-centered">
							<form class="form-search">
							<span class="input-icon">
							<i class="icon-search" id="nav-search-icon"></i>
								<input type="text" placeholder="Search ..." class="input-small search-query" id="nav-search-input" autocomplete="off" />
								
							</span>
						</form>
					</li>		
					</ul>-->
					<ul class="nav ace-nav pull-right">
						
						<li class="grey">
							<a data-toggle="dropdown" class="dropdown-toggle" href="#">
								<i class="icon-tasks"></i>
								<span class="badge badge-grey">4</span>
							</a>

							<ul class="pull-right dropdown-navbar dropdown-menu dropdown-caret dropdown-closer">
								<li class="nav-header">
									<i class="icon-ok"></i>
									4 Tasks to complete
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">Software Update</span>
											<span class="pull-right">65%</span>
										</div>

										<div class="progress progress-mini ">
											<div style="width:65%" class="bar"></div>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">Hardware Upgrade</span>
											<span class="pull-right">35%</span>
										</div>

										<div class="progress progress-mini progress-danger">
											<div style="width:35%" class="bar"></div>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">Unit Testing</span>
											<span class="pull-right">15%</span>
										</div>

										<div class="progress progress-mini progress-warning">
											<div style="width:15%" class="bar"></div>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">Bug Fixes</span>
											<span class="pull-right">90%</span>
										</div>

										<div class="progress progress-mini progress-success progress-striped active">
											<div style="width:90%" class="bar"></div>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										See tasks with details
										<i class="icon-arrow-right"></i>
									</a>
								</li>
							</ul>
						</li>

						<li class="purple">
							<a data-toggle="dropdown" class="dropdown-toggle" href="#">
								<i class="icon-bell-alt icon-only icon-animated-bell"></i>
								<span class="badge badge-important">8</span>
							</a>

							<ul class="pull-right dropdown-navbar navbar-pink dropdown-menu dropdown-caret dropdown-closer">
								<li class="nav-header">
									<i class="icon-warning-sign"></i>
									8 Notifications
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">
												<i class="btn btn-mini no-hover btn-pink icon-comment"></i>
												New Comments
											</span>
											<span class="pull-right badge badge-info">+12</span>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<i class="btn btn-mini btn-primary icon-user"></i>
										Bob just signed up as an editor ...
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">
												<i class="btn btn-mini no-hover btn-success icon-shopping-cart"></i>
												New Orders
											</span>
											<span class="pull-right badge badge-success">+8</span>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										<div class="clearfix">
											<span class="pull-left">
												<i class="btn btn-mini no-hover btn-info icon-twitter"></i>
												Followers
											</span>
											<span class="pull-right badge badge-info">+11</span>
										</div>
									</a>
								</li>

								<li>
									<a href="#">
										See all notifications
										<i class="icon-arrow-right"></i>
									</a>
								</li>
							</ul>
						</li>

						<li class="green">
							<a data-toggle="dropdown" class="dropdown-toggle" href="#">
								<i class="icon-envelope-alt icon-only icon-animated-vertical"></i>
								<span class="badge badge-success">5</span>
							</a>

							<ul class="pull-right dropdown-navbar dropdown-menu dropdown-caret dropdown-closer">
								<li class="nav-header">
									<i class="icon-envelope"></i>
									5 Messages
								</li>

								<li>
									<a href="#">
										<img src="themes/images/avatar.png" class="msg-photo" alt="Alex's Avatar" />
										<span class="msg-body">
											<span class="msg-title">
												<span class="blue">Alex:</span>
												Bob has checked in to the event...
											</span>

											<span class="msg-time">
												<i class="icon-time"></i>
												<span>a moment ago</span>
											</span>
										</span>
									</a>
								</li>

								<li>
									<a href="#">
										<img src="themes/images/avatar3.png" class="msg-photo" alt="Susan's Avatar" />
										<span class="msg-body">
											<span class="msg-title">
												<span class="blue">Susan:</span>
												Michael has checked in to the event...
											</span>

											<span class="msg-time">
												<i class="icon-time"></i>
												<span>20 minutes ago</span>
											</span>
										</span>
									</a>
								</li>

								<li>
									<a href="#">
										<img src="themes/images/avatar4.png" class="msg-photo" alt="Bob's Avatar" />
										<span class="msg-body">
											<span class="msg-title">
												<span class="blue">Bob:</span>
												Jessica has checked in to the event...
											</span>

											<span class="msg-time">
												<i class="icon-time"></i>
												<span>3:15 pm</span>
											</span>
										</span>
									</a>
								</li>

								<li>
									<a href="#">
										See all messages
										<i class="icon-arrow-right"></i>
									</a>
								</li>
							</ul>
						</li>

						<li class="light-blue user-profile">
							<a data-toggle="dropdown" href="#" class="user-menu dropdown-toggle">
								<img class="nav-user-photo" src="themes/images/user.png" alt="Jason's Photo" />
								<span id="user_info">
									<small>Welcome,</small>
									Demo
								</span>

								<i class="icon-caret-down"></i>
							</a>

							<ul class="pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-closer" id="user_menu">
								<li>
									<a href="#">
										<i class="icon-cog"></i>
										Settings
									</a>
								</li>

								<li>
									<a href="#">
										<i class="icon-user"></i>
										Profile
									</a>
								</li>

								<li class="divider"></li>

								<li>
									<a href="#">
										<i class="icon-off"></i>
										Logout
									</a>
								</li>
							</ul>
						</li>
						
					</ul><!--/.w8-nav-->
					
					
				</div><!--/.container-fluid-->
			</div><!--/.navbar-inner-->
		</div>
		
		
		<div class="container-fluid" id="main-container">
	
		<ul class="nav nav-tabs">
      <li class="active"><a href="#dashboard" data-toggle="tab">Dashboard</a></li>
      <li class=""><a href="#createEvent" data-toggle="tab">Create an event</a></li>
   	  <li style="padding-left:15px;min-width:50px;margin-top:-2px;"><form class="navbar-form form-search pagination-centered" method="POST" action="" accept-charset="UTF-8">
        					<span class="input-icon">
							<i class="icon-search" id="nav-search-icon"></i>
								<input type="text" placeholder="Search ..." class="span8 input-large search-query" id="nav-search-input" autocomplete="off" />
							</span>
     					 
     					 </form></li>
    </ul>
 
<div id="myTabContent" class="tab-content">
      <div class="tab-pane active" id="dashboard">
      				<div id="page-content" class="clearfix">
					<div class="page-header position-relative">
						<h1>
							Dashboard
							<small>
								<i class="icon-double-angle-right"></i>
								Your Events
							</small>
						</h1>
					</div><!--/.page-header-->
					
					<div class="row-fluid">
						<!--PAGE CONTENT BEGINS HERE-->
						

						<div class="page-header position-relative">
						
							<h3>
								<i class="icon-double-angle-right"></i>
								Upcoming events
							</h3>
						
					</div><!--/.page-header-->
					
					<ul class="thumbnails" id="upcomingEvents">
							<img src="loading.gif" id="loading-indicator" style="display:none" />
  						
					</ul>

					<div class="page-header position-relative">
						
							<h3>
								<i class="icon-double-angle-right"></i>
								Previous events
							</h3>
						
					</div><!--/.page-header-->
					
					<ul class="thumbnails" id="pastEvents">
						<img src="loading.gif" id="loading-indicator" style="display:none" />
					</ul>
					
						<!--PAGE CONTENT ENDS HERE-->
					</div><!--/row-->
					

				</div>	
      </div>
      <div class="tab-pane" id="createEvent">
      			<div class="page-header position-relative">
						<h5>
							Event Details
						</h5>
					</div><!--/.page-header-->
					<form action="billing" method="post" class="form-horizontal" id="billingform" accept-charset="utf-8">
					<div class="control-group ">
					<label class="control-label"></label>
						<div class="fileupload fileupload-new" data-provides="fileupload">
  						<div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;"></div>
  
  						<div>
   						<label class="control-label"></label> <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" /></span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div>
        
					</div>
			<div class="control-group">
				<label for="email" class="control-label">	
					Name
				</label>
				<div class="controls">
					<input name="email" type="email" value="" id="email">
					<span class="help-inline">  </span>
				</div>
			</div>
 
			<div class="control-group">
				<label for="address" class="control-label">	
					Description
				</label>
				<div class="controls"><input name="address" placeholder="" type="text" value="" id="address"><span class="help-inline"> </span>
				</div>
			</div>
 
			<div class="control-group">
				<label for="zip" class="control-label">	
					Date/Time
				</label>
				<div class="controls"><input name="zip" type="text" value="" id="zip">
				</div>
			</div>
 
			<div class="control-group">
				<label for="city" class="control-label">	
					Venue
				</label>
				<div class="controls"><input name="city" type="text" value="" id="city">
				</div>
			</div>
			
			
 
			<div class="form-actions">
				<button type="submit" class="btn btn-large btn-primary">Create Event</button>
			</div>
		</form>
      
      </div>
  </div>	
  				
<!-- Modal Stats-->
  					<div class="modal fade hide" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
         <h4 id="modalTitle" class="modal-title"></h4>
          
        </div>
        <div class="modal-body"> 
        <div class="widget-box">
									<div class="widget-header widget-header-flat widget-header-small">
										<h5><i class="icon-signal"></i>Attendents Statistics</h5>

										<div class="widget-toolbar no-border">
											<button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown">This Week<i class="icon-angle-down icon-on-right"></i></button>

											<ul class="dropdown-menu dropdown-info pull-right dropdown-caret">
												<li class="active"><a href="#">This Week</a></li>

												<li><a href="#">Last Week</a></li>

												<li><a href="#">This Month</a></li>

												<li><a href="#">Last Month</a></li>
											</ul>
										</div>
									</div>

									<div class="widget-body">
										<div class="widget-main">
											<div id="piechart-placeholder"></div>

											<div class="hr hr8 hr-double"></div>

											<div class="clearfix">
												
											</div>
										</div><!--/widget-main-->
									</div><!--/widget-body-->
								</div><!--/widget-box-->
        
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <!--<button type="button" class="btn btn-primary">Save changes</button>-->
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
  
  
  					<!-- Modal Edit Event-->
   						 <div class="modal fade hide" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Edit Event</h4>
        </div>
        <div class="modal-body">
        	<form action="#" method="post" class="form-horizontal" id="billingform" accept-charset="utf-8">
        	<!--<div class="control-group pagination-centered">
        		<div id="eImg">
        		</div>
        	</div>-->
        	<div class="control-group ">
					<label class="control-label"></label>
						<div class="fileupload fileupload-new" data-provides="fileupload">
  						<div class="fileupload-preview thumbnail" id="thumbnail" style="width: 120px; height: 120px;"></div>
  
  						<div>
   						<label class="control-label"></label> <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" /></span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div>
        
					</div>
			<div class="control-group">
				<label for="name" class="control-label">	
					Name
				</label>
				<div class="controls">
					<input name="name" type="text" value="" id="name">
					<span class="help-inline">  </span>
				</div>
			</div>
 
			<div class="control-group">
				<label for="description" class="control-label">	
					Description
				</label>
				<div class="controls"><input name="description" placeholder="" type="text" value="" id="name"><span class="help-inline"> </span>
				</div>
			</div>
 
			<div class="control-group">
				<label for="dateTime" class="control-label">	
					Date/Time
				</label>
				<div class="controls"><input name="dateTime" type="text" value="" id="dateTime">
				</div>
			</div>
 
			<div class="control-group">
				<label for="venue" class="control-label">	
					Venue
				</label>
				<div class="controls"><input name="venue" type="text" value="" id="venue">
				</div>
			</div>
			  <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Close</button>
          		<button type="button" class="btn btn-primary pull-right">Save changes</button>
			
		</form>
        </div>
        <div class="modal-footer">
        
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modaleditevent -->
		</div><!--/.fluid-container#main-container-->

		
  		<!--	  <a href="#" id="btn-scroll-up" class="btn btn-small btn-inverse">
			<i class="icon-double-angle-up icon-only bigger-110"></i>
		</a>-->
		
		
		<!-- Button trigger modal -->
 
		<!--basic scripts-->

		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script type="text/javascript">
			window.jQuery || document.write("<script src='themes/js/jquery-1.9.1.min.js'>"+"<"+"/script>");
		</script>
		<script src="bootstrap/js/bootstrap.min.js"></script>
		<script src="bootstrap/js/bootstrap-fileupload.min.js"></script>
		<script src="themes/js/jquery-ui-1.10.3.custom.min.js"></script>
		<script src="themes/js/jquery.ui.touch-punch.min.js"></script>
		
		<script src="themes/js/jquery.slimscroll.min.js"></script>
		<script src="themes/js/jquery.easy-pie-chart.min.js"></script>
		<script src="themes/js/jquery.sparkline.min.js"></script>
		<script src="themes/js/jquery.easy-pie-chart.min.js"></script>
		<script src="themes/js/jquery.flot.min.js"></script>
		<script src="themes/js/jquery.flot.pie.min.js"></script>
		<script src="themes/js/jquery.flot.resize.min.js"></script>

		<!--w8 scripts-->
		
		<script src="themes/js/w8-elements.min.js"></script>
		<script src="themes/js/w8.min.js"></script>
		<script src="login.js"></script>
		
		
		<!--inline scripts related to this page-->

		<script type="text/javascript">
			
			
			$(function() {
			
				var eventById = {};
				var eventByName = {};
				var eventNames = [];
				var isSearchBox = false;
				$('#loading-indicator').show();
				$.ajax({
    				url: "https://api.mongolab.com/api/1/databases/heroku_app18483888/collections/events?apiKey=PA_sLftTwLD_fL_uoFsLZJiQQM6A87-U",
					type: "GET",
					contentType: "application/json",
    				success:function(json) {
    					
      					
      					$(json).each(function(i,e){
      						eventById[e._id] = e;
      						eventByName[e.name] = e;
      						eventNames[i] = String(e.name);
      						var dateParts = e.dateTime.split("/");
      						var eDate = new Date(dateParts[2], dateParts[1] - 1, dateParts[0]);
      						var nowDate = new Date();
      						if(eDate > nowDate){
      							var sb = [];
      							sb.push('<li class="span5 clearfix">');
  								sb.push('<div class="thumbnail clearfix">');
    							sb.push('<img src="events/'+e.imgUrl+'" alt="ALT NAME" class="pull-left span5 clearfix" style="margin-right:10px;height:100%;">');
    							sb.push('<div class="caption" class="pull-left">');
      							//sb.push('<a href="#" class="btn btn-primary icon  pull-right">Select</a>');
      							sb.push('<button id="editEvent" oid="'+e._id+'" class="btn btn-primary btn-lg pull-right"><i class="icon-pencil"></i>Edit</button>');
      							//sb.push('<small><b>ID: </b>'+e._id+'</small>');
      							sb.push('<h4><a href="#" >'+e.name+'</a></h4>');
      							sb.push('<h5><a href="#" >'+e.description+'</a></h5>');
      							sb.push('<h5><a href="#" >'+e.venue+'  |  '+e.dateTime+'</a></h5>');
        					
        						sb.push('</div></div></li>');
        						$("#upcomingEvents").append(sb.join(''));
      						}else{
      							
      							var sb = [];
      							sb.push('<li class="span5 clearfix">');
  								sb.push('<div class="thumbnail clearfix">');
    							sb.push('<img src="events/'+e.imgUrl+'" alt="ALT NAME" class="pull-left span5 clearfix" style="margin-right:10px;height:100%;">');
    							sb.push('<div class="caption" class="pull-left">');
    							sb.push('<button id="editEvent" oid="'+e._id+'" class="btn btn-primary btn-lg pull-right" style="border-left:1px solid #FFFFFF"><i class="icon-pencil"></i>Edit</button>');
      							sb.push('<button id="showModal" oid="'+e._id+'" class="btn btn-primary btn-lg pull-right" style="border-right:1px solid #FFFFFF"><i class="icon-signal"></i>Stats</button>');
      							//sb.push('<a data-toggle="modal" href="#myModal" class="btn btn-primary btn-lg pull-right">Stats</a>');
      							//sb.push('<small><b>ID: </b>'+e._id+'</small>');
      							sb.push('<h4><a href="#" >'+e.name+'</a></h4>');
      							sb.push('<h5><a href="#" >'+e.description+'</a></h5>');
      							sb.push('<h5><a href="#" >'+e.venue+'  |  '+e.dateTime+'</a></h5>');
        					
        						sb.push('</div></div></li>');
        						$("#pastEvents").append(sb.join(''));
      						}
      						
      					});
      					
      					$("#nav-search-input").typeahead({
      						source:eventNames,
      						updater:function(a){
      							editEvent(eventByName[a]._id);
      						}
      					});
      					
      					$("#searchIcon").on('click',function(e){
      						if(isSearchBox==false){
      							$("#searchBox").show();
      							isSearchBox = true;
      						}else{
      							$("#searchBox").hide();
      							isSearchBox = false;
      						}
      					});
      					
      					$(document).mouseup(function (e)
{
    var container = $("#searchBox");

    if (!container.is(e.target) // if the target of the click isn't the container...
        && container.has(e.target).length === 0) // ... nor a descendant of the container
    {
        container.hide();
        isSearchBox = false;
    }
});
      					
      					$('.thumbnail #editEvent').on('click',function (e) {
      					
      						var oid = $(this).attr('oid');
      						editEvent(oid);
      					});
      					
      					$('.thumbnail #showModal').on('click',function (e) {
      			
      						var oid = $(this).attr('oid');
							openStats(oid);
						});
						$('#loading-indicator').hide();
   					}
 	 			});
				var oldie = $.browser.msie && $.browser.version < 9;
				
				function openStats(eId){
					var thisEvent = eventById[eId];
					
					$('#modalTitle').text('Stats of '+thisEvent.name);
					/*var sb = [];
					sb.push('<div class="widget-box">');
					sb.push('<div class="widget-header widget-header-flat widget-header-small">');
					sb.push('<h5><i class="icon-signal"></i>Attendents Statistics</h5>');
					sb.push('<div class="widget-toolbar no-border">');
					sb.push('<button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown">This Week<i class="icon-angle-down icon-on-right"></i></button>');
					sb.push('<ul class="dropdown-menu dropdown-info pull-right dropdown-caret"><li class="active"><a href="#">This Week</a></li><li><a href="#">Last Week</a></li><li><a href="#">This Month</a></li><li><a href="#">Last Month</a></li></ul>');
					sb.push('</div>');
					sb.push('</div>');
					sb.push('<div class="widget-body">');
					sb.push('<div class="widget-main">');
					sb.push('<div id="piechart-placeholder"></div>');
					sb.push('<div class="hr hr8 hr-double"></div>');
					sb.push('<div class="clearfix">');
					sb.push('</div>');
					sb.push('</div><!--/widget-main-->');
					sb.push('</div><!--/widget-body-->');
					sb.push('</div><!--/widget-box-->');
					sb.join('');
					$('.modal-body').append(sb);*/
					$('#myModal').modal('show');
					var data = [
				{ label: "SIS Students",  data: 15.0, color: "#68BC31"},
				{ label: "SOB Students",  data: 17.0, color: "#AF4E96"},
				{ label: "SOA Students",  data: 15.0, color: "#CCCCCC"},
				{ label: "SOE Students",  data: 18.0, color: "#DA5430"},
				{ label: "Professors/TAs",  data: 15.0, color: "#2091CF"},
				{ label: "Others",  data: 20, color: "#FEE074"}
			  ];
					drawPieChart(data);
				}
				
				
				function drawPieChart(data){
				
						 $('.easy-pie-chart.percentage').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
					var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
					var size = parseInt($(this).data('size')) || 50;
					$(this).easyPieChart({
						barColor: barColor,
						trackColor: trackColor,
						scaleColor: false,
						lineCap: 'butt',
						lineWidth: parseInt(size/10),
						animate: oldie ? false : 1000,
						size: size
					});
				})
			
				$('.sparkline').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';
					$(this).sparkline('html', {tagValuesAttribute:'data-values', type: 'bar', barColor: barColor , chartRangeMin:$(this).data('min') || 0} );
				});
			
			
			
			
			  
			
			  var placeholder = $('#piechart-placeholder').css({'width':'90%' , 'height':'150px'});
			  $.plot(placeholder, data, {
				
				series: {
			        pie: {
			            show: true,
						tilt:0.8,
						highlight: {
							opacity: 0.25
						},
						stroke: {
							color: '#fff',
							width: 2
						},
						startAngle: 2
						
			        }
			    },
			    legend: {
			        show: true,
					position: "ne", 
				    labelBoxBorderColor: null,
					margin:[-30,15]
			    }
				,
				grid: {
					hoverable: true,
					clickable: true
				},
				tooltip: true, //activate tooltip
				tooltipOpts: {
					content: "%s : %y.1",
					shifts: {
						x: -30,
						y: -50
					}
				}
				
			 });
			
			 
			  var $tooltip = $("<div class='tooltip top in' style='display:none;'><div class='tooltip-inner'></div></div>").appendTo('body');
			  placeholder.data('tooltip', $tooltip);
			  var previousPoint = null;
			
			  placeholder.on('plothover', function (event, pos, item) {
				if(item) {
					if (previousPoint != item.seriesIndex) {
						previousPoint = item.seriesIndex;
						var tip = item.series['label'] + " : " + item.series['percent']+'%';
						$(this).data('tooltip').show().children(0).text(tip);
					}
					$(this).data('tooltip').css({top:pos.pageY + 10, left:pos.pageX + 10});
				} else {
					$(this).data('tooltip').hide();
					previousPoint = null;
				}
				
			 });
			 
				}
				
				function drawPlot(data){
					
			
			
				var d1 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.5) {
					d1.push([i, Math.sin(i)]);
				}
			
				var d2 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.5) {
					d2.push([i, Math.cos(i)]);
				}
			
				var d3 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.2) {
					d3.push([i, Math.tan(i)]);
				}
				
			
				var sales_charts = $('#sales-charts').css({'width':'100%' , 'height':'220px'});
				$.plot("#sales-charts", [
					{ label: "Before 1 hour", data: d1 },
					{ label: "Before 15 mins", data: d2 },
					{ label: "After event has started", data: d3 }
				], {
					hoverable: true,
					shadowSize: 0,
					series: {
						lines: { show: true },
						points: { show: true }
					},
					xaxis: {
						tickLength: 0
					},
					yaxis: {
						ticks: 10,
						min: -2,
						max: 2,
						tickDecimals: 3
					},
					grid: {
						backgroundColor: { colors: [ "#fff", "#fff" ] },
						borderWidth: 1,
						borderColor:'#555'
					}
				});
				}
				
				
				function editEvent(eId){
					var thisEvent = eventById[eId];
					var thisModal = $('#myModal1');
					$('#thumbnail',thisModal).empty();
					$('<img src="events/'+ thisEvent.imgUrl +'">').load(function() {
  						$(this).width("120px").height("120px").appendTo('#thumbnail',thisModal);
					});
					$('input[name="name"]',thisModal).val(thisEvent.name);
					$('input[name="description"]',thisModal).val(thisEvent.description);
					$('input[name="dateTime"]',thisModal).val(thisEvent.dateTime);
					$('input[name="venue"]',thisModal).val(thisEvent.venue);
					$('#myModal1').modal('show');
				}
				/*
				$('#tasks').sortable();
				$('#tasks').disableSelection();
				$('#tasks input:checkbox').removeAttr('checked').on('click', function(){
					if(this.checked) $(this).closest('li').addClass('selected');
					else $(this).closest('li').removeClass('selected');
				});
			
				
				$('#recent-box [data-rel="tooltip"]').tooltip({plw8ment: tooltip_plw8ment});
				function tooltip_plw8ment(context, source) {
					var $source = $(source);
					var $parent = $source.closest('.tab-content')
					var off1 = $parent.offset();
					var w1 = $parent.width();
			
					var off2 = $source.offset();
					var w2 = $source.width();
			
					if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';
					return 'left';
				}
				*/
				
			})
		</script>
	</body>
</html>
